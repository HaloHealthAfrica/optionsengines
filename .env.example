# Database Configuration
DATABASE_URL=postgresql://user:password@host:5432/dbname

# Redis Cache (optional - for dashboard performance)
REDIS_URL=rediss://default:password@host:6379

# Server Configuration
PORT=8080
NODE_ENV=development
APP_MODE=PAPER

# Authentication
JWT_SECRET=your-secret-key-min-32-chars-change-in-production
HMAC_SECRET=your-hmac-secret-for-webhook-verification

# Market Data Providers
MARKET_DATA_PROVIDER=alpaca

# Alpaca (Primary)
ALPACA_API_KEY=your-alpaca-key-id
ALPACA_SECRET_KEY=your-alpaca-secret-key
ALPACA_PAPER=true
ALPACA_BASE_URL=https://paper-api.alpaca.markets

# TwelveData (Backup)
TWELVE_DATA_API_KEY=your-twelvedata-key

# MarketData.app (Backup)
MARKET_DATA_API_KEY=your-marketdata-token

# Optional Providers
POLYGON_API_KEY=your-polygon-key
ALPHA_VANTAGE_API_KEY=your-alphavantage-key

# Unusual Whales (options chain, price, intraday OHLC)
UNUSUAL_WHALES_API_KEY=your-unusual-whales-bearer-token
UNUSUAL_WHALES_GAMMA_URL=https://api.unusualwhales.com/stock/{symbol}/gamma
UNUSUAL_WHALES_OPTIONS_ENABLED=true
UNUSUAL_WHALES_RATE_LIMIT_PER_MINUTE=120
UNUSUAL_WHALES_RATE_LIMIT_PER_DAY=15000

# Performance Tuning
SLOW_REQUEST_MS=2000
DB_POOL_MAX=20
CACHE_TTL_SECONDS=60

# Rate Limiting
ALPACA_RATE_LIMIT=200
TWELVE_DATA_RATE_LIMIT=800

# Worker Intervals (milliseconds)
SIGNAL_PROCESSOR_INTERVAL=30000
ORDER_CREATOR_INTERVAL=30000
PAPER_EXECUTOR_INTERVAL=10000
POSITION_REFRESHER_INTERVAL=60000
EXIT_MONITOR_INTERVAL=60000

# Confluence (Flow page, trade gate, position sizing)
# Phase 4: View in Settings > Flow & Confluence
CONFLUENCE_MIN_THRESHOLD=75
ENABLE_CONFLUENCE_GATE=true
ENABLE_CONFLUENCE_SIZING=true
BASE_POSITION_SIZE=1

# Alerts (Discord/Slack when confluence >= threshold)
DISCORD_WEBHOOK_URL=
SLACK_WEBHOOK_URL=
ALERTS_ENABLED=false
ALERT_COOLDOWN_MINUTES=30

# Risk Management
MAX_POSITION_SIZE=10
MAX_DAILY_LOSS=1000.00
MAX_OPEN_POSITIONS=5
MAX_EXPOSURE_PERCENT=20.00

# Exit Rules
PROFIT_TARGET_PCT=50.00
STOP_LOSS_PCT=50.00
TIME_STOP_DTE=1
MAX_HOLD_DAYS=5

# A/B Testing
AB_SPLIT_PERCENTAGE=0
ENABLE_VARIANT_B=false

# Feature Flags (Engine 2)
ENABLE_ORB_SPECIALIST=false
ENABLE_STRAT_SPECIALIST=false
ENABLE_TTM_SPECIALIST=false
ENABLE_SATYLAND_SUBAGENT=false
ENABLE_SHADOW_EXECUTION=false

# Logging
LOG_LEVEL=info

# Sentry Configuration
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_TRACES_SAMPLE_RATE=1.0
SENTRY_PROFILES_SAMPLE_RATE=1.0

# Production E2E Testing
PRODUCTION_URL=https://your-production-url.com/webhook
TEST_COUNT=5

# Vercel Cron (serverless processing)
# Set on both frontend (Vercel) and backend. Min 16 chars.
CRON_SECRET=your-secure-cron-secret-min-16-chars
CRON_BATCH_SIZE=10
# Set to false when workers run (e.g. Fly.io) to skip cron processing
# ENABLE_CRON_PROCESSING=false